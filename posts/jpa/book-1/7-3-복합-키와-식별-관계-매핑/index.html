<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>7.3 복합 키와 식별 관계 매핑 | Today I Learn</title>
<meta name="keywords" content="JPA, Book, Korean">
<meta name="description" content="7.3 복합 키와 식별 관계 매핑 7.3.1 식별 관계 vs 비식별 관계 식별관계 부모 테이블의 기본 키를 내려받아서 자식 테이블의 기본 키 &#43; 외래 키로 사용한다. 비식별 관계 부모 테이블의 기본 키를 받아서 자식 테이블의 외래 키로만 사용하는 관계다. 필수적 비식별 관계(Mandatory) 외래 키에 NULL을 허용하지 않는다. 반드시 연관관계를 맺어야 한다. 선택적 비식별 관계(Optional) 외래 키에 NULL을 허용한다. 연관관계를 맺을지 말지 선택할 수 있다. 최근 트렌드는 비식별 관계를 주로 사용하고 꼭 필요한 곳에만 식별 관계를 사용하는 추세다.">
<meta name="author" content="Soo Jong">
<link rel="canonical" href="https://92SooJong.github.io/posts/jpa/book-1/7-3-%EB%B3%B5%ED%95%A9-%ED%82%A4%EC%99%80-%EC%8B%9D%EB%B3%84-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css" integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://92SooJong.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://92SooJong.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://92SooJong.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://92SooJong.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://92SooJong.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="7.3 복합 키와 식별 관계 매핑" />
<meta property="og:description" content="7.3 복합 키와 식별 관계 매핑 7.3.1 식별 관계 vs 비식별 관계 식별관계 부모 테이블의 기본 키를 내려받아서 자식 테이블의 기본 키 &#43; 외래 키로 사용한다. 비식별 관계 부모 테이블의 기본 키를 받아서 자식 테이블의 외래 키로만 사용하는 관계다. 필수적 비식별 관계(Mandatory) 외래 키에 NULL을 허용하지 않는다. 반드시 연관관계를 맺어야 한다. 선택적 비식별 관계(Optional) 외래 키에 NULL을 허용한다. 연관관계를 맺을지 말지 선택할 수 있다. 최근 트렌드는 비식별 관계를 주로 사용하고 꼭 필요한 곳에만 식별 관계를 사용하는 추세다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://92SooJong.github.io/posts/jpa/book-1/7-3-%EB%B3%B5%ED%95%A9-%ED%82%A4%EC%99%80-%EC%8B%9D%EB%B3%84-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-02T22:55:00+09:00" />
<meta property="article:modified_time" content="2022-08-02T22:55:00+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="7.3 복합 키와 식별 관계 매핑"/>
<meta name="twitter:description" content="7.3 복합 키와 식별 관계 매핑 7.3.1 식별 관계 vs 비식별 관계 식별관계 부모 테이블의 기본 키를 내려받아서 자식 테이블의 기본 키 &#43; 외래 키로 사용한다. 비식별 관계 부모 테이블의 기본 키를 받아서 자식 테이블의 외래 키로만 사용하는 관계다. 필수적 비식별 관계(Mandatory) 외래 키에 NULL을 허용하지 않는다. 반드시 연관관계를 맺어야 한다. 선택적 비식별 관계(Optional) 외래 키에 NULL을 허용한다. 연관관계를 맺을지 말지 선택할 수 있다. 최근 트렌드는 비식별 관계를 주로 사용하고 꼭 필요한 곳에만 식별 관계를 사용하는 추세다."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://92SooJong.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "JPA",
      "item": "https://92SooJong.github.io/posts/jpa/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "(교재) Java ORM 표준 JPA 프로그래밍",
      "item": "https://92SooJong.github.io/posts/jpa/book-1/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "7.3 복합 키와 식별 관계 매핑",
      "item": "https://92SooJong.github.io/posts/jpa/book-1/7-3-%EB%B3%B5%ED%95%A9-%ED%82%A4%EC%99%80-%EC%8B%9D%EB%B3%84-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "7.3 복합 키와 식별 관계 매핑",
  "name": "7.3 복합 키와 식별 관계 매핑",
  "description": "7.3 복합 키와 식별 관계 매핑 7.3.1 식별 관계 vs 비식별 관계 식별관계 부모 테이블의 기본 키를 내려받아서 자식 테이블의 기본 키 + 외래 키로 사용한다. 비식별 관계 부모 테이블의 기본 키를 받아서 자식 테이블의 외래 키로만 사용하는 관계다. 필수적 비식별 관계(Mandatory) 외래 키에 NULL을 허용하지 않는다. 반드시 연관관계를 맺어야 한다. 선택적 비식별 관계(Optional) 외래 키에 NULL을 허용한다. 연관관계를 맺을지 말지 선택할 수 있다. 최근 트렌드는 비식별 관계를 주로 사용하고 꼭 필요한 곳에만 식별 관계를 사용하는 추세다.",
  "keywords": [
    "JPA", "Book", "Korean"
  ],
  "articleBody": "7.3 복합 키와 식별 관계 매핑 7.3.1 식별 관계 vs 비식별 관계 식별관계 부모 테이블의 기본 키를 내려받아서 자식 테이블의 기본 키 + 외래 키로 사용한다. 비식별 관계 부모 테이블의 기본 키를 받아서 자식 테이블의 외래 키로만 사용하는 관계다. 필수적 비식별 관계(Mandatory) 외래 키에 NULL을 허용하지 않는다. 반드시 연관관계를 맺어야 한다. 선택적 비식별 관계(Optional) 외래 키에 NULL을 허용한다. 연관관계를 맺을지 말지 선택할 수 있다. 최근 트렌드는 비식별 관계를 주로 사용하고 꼭 필요한 곳에만 식별 관계를 사용하는 추세다. 7.3.2 복합 키: 비식별 관계 매핑 둘 이상의 컬럼으로 구성된 복합 키는 별도의 식별 클래스를 정의해야한다. 식별자를 구분하기 위해서 equals 와 hashcode 메소드를 통해서 동등성을 비교한다. 식별자 필드가 1개일때는 자바에서 제공하는 타입을 사용하기 때문에 직접 equals 와 hashcode 를 사용할 필요가 없으나, 직접 식별 클래스를 정의할때는 equals 와 hashcode 를 직접 작성 해줘야한다. JPA는 복합키를 위해 @EmbeddedId 와 @IdClass 를 제공한다. @IdClass 는 데이터베이스에 맞춘 방법이고, @EmbeddedId 는 좀 더 객체지향적인 방법이다. @IdClass 아래와 같이 복합키 클래스를 작성한다. Serializable 인터페이스를 구현해야한다. equals 와 hashCode 를 작성해야한다. 기본 생성자가 있어야한다. 식별자 클래스는 public이어야 한다. 아래와 같이 ParentId 클래스를 이용하는 Entity를 생성한다. 주의할 점은 Parent 클래스의 식별자 필드명이 ParentId 의 필드명과 같아야 한다. 간단한 예제를 살펴보자. Parent 엔티티를 저장할때 ParentId를 전혀 사용하지 않는 모습을 확인할 수 있다. Parent 엔티티를 persist 하게되면 내부적으로 ParentId를 만들어서 영속성 컨텍스트의 엔티티 키로 사용한다. 1Parent parent = new Parent(); 2parent.setId1(\"myId1\"); 3parent.setId2(\"myId2\"); 4parent.setName(\"soojong\"); 5em.persist(parent); 6 7ParentId parentId = new ParentId(\"myId1\", \"myId2\"); 8Parent findParent = em.find(Parent.class, parentId); 9 10System.out.println(\"findParent.getId1() = \" + findParent.getId1()); 11System.out.println(\"findParent.getId2() = \" + findParent.getId2()); 12System.out.println(\"findParent.getName() = \" + findParent.getName()); Child Entity를 정의해보자. Parent와 연관관계를 맺으려고 하는데 Parent 클래스의 PK가 2개인 경우 아래와 같이 @JoinColumns 어노테이션을 사용하면 된다. @EmbeddedId ParentId 클래스를 아래와 같이 작성한다. @IdClass 방식과 달리 ParentId에 직접 기본키 컬럼명을 작성한다. 마찬가지로 몇가지 지켜야할 사항이 있는데 아래와 같다. Serializable 인터페이스를 구현해야한다. equals 와 hashCode 를 구현해야한다. 기본 생성자가 있어야한다. 식별자 클래스는 public 이어야한다. Parent 엔티티가 덕분에 심플해진다. 사용 예제를 살펴보자. 이전과 달리 직접 ParentId를 정의하고 세팅해줘야한다. 1Parent parent = new Parent(); 2ParentId parentId = new ParentId(\"myId1\", \"myId2\"); 3parent.setId(parentId); // 직접 세팅 4parent.setName(\"parentName\"); 5em.persist(parent); 6 7ParentId findParentId = new ParentId(\"myId1\", \"myId2\"); 8Parent findParent = em.find(Parent.class, findParentId); 9 10System.out.println(\"findParent.getName() = \" + findParent.getName()); 복합 키와 equals(), hashCode() 복합키를 사용하는 경우 직접 equals 와 hashCode 메소드를 구현해야한다. Object가 제공하는 equals 의 내부 동작 방식은 참조값 비교인 == (동일성) 비교 이다. 영속성 컨텍스트에 있는 엔티티의 키를 찾을때는 equals를 수행하는데 복합키 클래스를 참조 비교하지 않도록 재작성 해야한다. (동등성 비교를 수행하도록 수정 필요) 따라서 복합키 클래스는 equals 메소드를 적절히 오버라이딩해서 작성해야한다. 1ParentId id1 = new ParentId(\"myId1\",\"myId2\"); 2ParentId id2 = new ParentId(\"myId1\",\"myId2\"); 3 4System.out.println(\"id1.equals(id2) = \" + id1.equals(id2)); 5System.out.println(\"id1.hashCode() = \" + id1.hashCode()); 6System.out.println(\"id2.hashCode() = \" + id2.hashCode()); @IdClass vs @EmbeddedId 두개의 방식이 각각 장단점이 있기때문에 본인의 취향에 맞는 것을 일관성 있게 사용하면된다. 7.3.3 복합 키: 식별 관계 매핑 @IdClass 방식 아래 그림은 부모에서부터 자식,손자까지 기본 키를 전달하는 식별관계를 나타낸다. 아래 관계를 @IdClass 와 @EmbeddedId 를 사용해서 작성해본다. 먼저 PARENT 테이블에 대응되는 Parent Entity를 정의한다. 다음 CHLID 테이블에 대응되는 Child Entity를 정의한다. CHILD 테이블은 복합키를 가지며, 그중 PARENT_ID는 PARENT 테이블에서 가져온다. JPA에선 아래와 같이 작성한다. Child Entity가 복합키를 갖도록 ChildId 클래스를 정의한다. 필드명은 Child Entity의 필드명을 그대로 작성해준다. 데이터 타입은 실제 Id의 타입을 따르도록 작성한다. ( Parent Entity의 키 타입을 따르도록한다.) GRANDCHILD 테이블에 대응되는 GrandChild Entity를 작성한다. 물리적으로 총 3개의 키를 가지는 복합키이다. 복합키와 연관관계를 맺을 수 있도록 아래와 같이 작성한다. 복합키를 사용할 수 있도록 GrandChildId 클래스를 정의한다. 마찬가지로 데이터 타입은 Child Entity의 데이터 타입을 따르도록 작성한다. 필드명은 GrandChild Entity에 정의되어 있는 키 필드와 동일하게 작성한다. @EmbeddedId 방식 @EmbeddedId 방식을 사용해서 식별 관계 매핑을 구성할때는 @MapsId 를 사용해야 한다. Parent Entity를 작성한다. Chlid Entity를 작성한다. @MapsId 어노테이션을 통해 ChildId 클래스에 존재하는 parentId와 매핑을 수행한다. ChildId 클래스를 작성한다. @MapsId(\"parentId\") 어노테이션과 매핑 될수 있도록 필드명을 parentId로 작성한다. GrandChild Entity를 작성한다. GrandChildId 클래스를 작성한다. @MapsId(\"childId\") 와 매핑하기 위해 필드명을 childId로 해야한다. 7.3.4 비식별 관계로 구현 7.3.3에서 사용한 식별 관계를 비식별 관계로 변형해서 구현해본다. Parent Entity를 작성한다. Child Entity를 작성한다. GrandChild Entity를 작성한다. 식별 관계의 복합키를 가지는 경우에 비해 코드가 단순해졌다. 7.3.5 일대일 식별 관계 일대일 식별 관계를 가지는 케이스를 살펴보자. 먼저 Board 테이블에 대응되는 Board Entity를 만든다. BoardDetail Entity를 가져올 수 있도록 연관관계를 매핑한다. BoardDetail 테이블에 대응되는 BoardDetail Entity를 만든다. 특이한 점이 있는데 Board Entity의 Key를 그대로 사용하는것이기 때문에 boardId 필드에 @GeneratedValue 어노테이션이 없다. BoardDetail에는 식별자가 단 1개만 존재하기 때문에 @MapsId 에 별도의 파라미터를 쓰지 않아도 된다. 이렇게 작성하면 유일한 key 필드인 boardId에 자동으로 매핑되어 정보를 가져올 수 있게된다. 7.3.6 식별, 비식별 관계의 장단점 식별 관계보다는 비식별 관계를 선호한다. 아주 특별한 경우가 아니라면 비식별 관계를 사용하고, 기본 키는 Long 타입의 대리 키를 사용하는 것이 좋다. Long 타입을 추천하는 이유는 자바에서 Integer는 20억 정도면 끝나버리지만, Long 타입은 290경까지 표기가 가능하다. 선택적 비식별 관계보단 필수적 비식별 관계를 사용하는 것이 좋다. 선택적인 비식별 관계는 NULL을 허용하기 때문에 Join시에 외부(Outter) Join을 사용해야한다. 반면에 필수적 비식별 관계는 NOT NULL이기 때문에 항상 관계가 있다는 것을 보장하므로 내부(Inner) Join만 사용해도 된다. 데이터베이스 설계 관점 - 비식별 선호 부모 테이블의 키를 자식 테이블로 전파하면서 자식 테이블의 키가 늘어나는 현상이 있다. 예시) 부모는 키 1개, 자식은 키 2개, 손자는 키 3개 이렇게 되면 Join시에 SQL이 복잡해지고, 인덱스의 사이즈가 커진다. 복합키를 구성할때 주로 비즈니스와 관련된 컬럼을 사용하는데 비즈니스 변경시에 테이블 작업량이 커진다. 키를 다른 테이블에서 참조하고 있기때문에 테이블 구조가 유연하지 못하게된다. 객체 관계 매핑 관점 - 비식별 선호 복합키를 사용하면 별도의 복합키 클래스를 만들어야 하기 때문에 작업량이 늘어난다. 비식별 관계의 기본 키는 주로 대리키를 사용하며 이와 관련된 @GeneratedValue 를 JPA에서 기본적으로 제공한다. (편리성 증가) 식별 관계가 가지는 미세한(?) 장점 식별 관계를 사용하면 키본 키 인덱스를 활용하기 좋다. 상우 테이블의 키를 자식이 가지고 있으므로, 특정 상황에서 Join을 사용하지 않고 하위테이블 만으로 검색이 가능하다. 예시) 부모의 ID가 A인 자식을 모두 조회하는 경우 자식 테이블 만으로 검색이 가능하다. ",
  "wordCount" : "927",
  "inLanguage": "en",
  "datePublished": "2022-08-02T22:55:00+09:00",
  "dateModified": "2022-08-02T22:55:00+09:00",
  "author":[{
    "@type": "Person",
    "name": "Soo Jong"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://92SooJong.github.io/posts/jpa/book-1/7-3-%EB%B3%B5%ED%95%A9-%ED%82%A4%EC%99%80-%EC%8B%9D%EB%B3%84-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Today I Learn",
    "logo": {
      "@type": "ImageObject",
      "url": "https://92SooJong.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://92SooJong.github.io/" accesskey="h" title="Today I Learn (Alt + H)">Today I Learn</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://92SooJong.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://92SooJong.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://92SooJong.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://soojong.tistory.com/" title="Tistory">
                    <span>Tistory</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://92SooJong.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://92SooJong.github.io/posts/">Posts</a>&nbsp;»&nbsp;<a href="https://92SooJong.github.io/posts/jpa/">JPA</a>&nbsp;»&nbsp;<a href="https://92SooJong.github.io/posts/jpa/book-1/">(교재) Java ORM 표준 JPA 프로그래밍</a></div>
    <h1 class="post-title">
      7.3 복합 키와 식별 관계 매핑
    </h1>
    <div class="post-meta"><span title='2022-08-02 22:55:00 +0900 KST'>August 2, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Soo Jong&nbsp;|&nbsp;<a href="https://github.com/92SooJong/92SooJong.github.io/issues" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#73-%eb%b3%b5%ed%95%a9-%ed%82%a4%ec%99%80-%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84-%eb%a7%a4%ed%95%91" aria-label="7.3 복합 키와 식별 관계 매핑">7.3 복합 키와 식별 관계 매핑</a></li>
                <li>
                    <a href="#731-%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84-vs-%eb%b9%84%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84" aria-label="7.3.1 식별 관계 vs 비식별 관계">7.3.1 식별 관계 vs 비식별 관계</a><ul>
                        
                <li>
                    <a href="#%ec%8b%9d%eb%b3%84%ea%b4%80%ea%b3%84" aria-label="식별관계">식별관계</a></li>
                <li>
                    <a href="#%eb%b9%84%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84" aria-label="비식별 관계">비식별 관계</a></li></ul>
                </li>
                <li>
                    <a href="#732-%eb%b3%b5%ed%95%a9-%ed%82%a4-%eb%b9%84%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84-%eb%a7%a4%ed%95%91" aria-label="7.3.2 복합 키: 비식별 관계 매핑">7.3.2 복합 키: 비식별 관계 매핑</a><ul>
                        
                <li>
                    <a href="#idclass" aria-label="@IdClass">@IdClass</a></li>
                <li>
                    <a href="#embeddedid" aria-label="@EmbeddedId">@EmbeddedId</a></li>
                <li>
                    <a href="#%eb%b3%b5%ed%95%a9-%ed%82%a4%ec%99%80-equals-hashcode" aria-label="복합 키와 equals(), hashCode()">복합 키와 equals(), hashCode()</a></li>
                <li>
                    <a href="#idclass-vs-embeddedid" aria-label="@IdClass vs @EmbeddedId">@IdClass vs @EmbeddedId</a></li></ul>
                </li>
                <li>
                    <a href="#733-%eb%b3%b5%ed%95%a9-%ed%82%a4-%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84-%eb%a7%a4%ed%95%91" aria-label="7.3.3 복합 키: 식별 관계 매핑">7.3.3 복합 키: 식별 관계 매핑</a><ul>
                        
                <li>
                    <a href="#idclass-%eb%b0%a9%ec%8b%9d" aria-label="@IdClass 방식">@IdClass 방식</a></li>
                <li>
                    <a href="#embeddedid-%eb%b0%a9%ec%8b%9d" aria-label="@EmbeddedId 방식">@EmbeddedId 방식</a></li></ul>
                </li>
                <li>
                    <a href="#734-%eb%b9%84%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84%eb%a1%9c-%ea%b5%ac%ed%98%84" aria-label="7.3.4 비식별 관계로 구현">7.3.4 비식별 관계로 구현</a></li>
                <li>
                    <a href="#735-%ec%9d%bc%eb%8c%80%ec%9d%bc-%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84" aria-label="7.3.5 일대일 식별 관계">7.3.5 일대일 식별 관계</a></li>
                <li>
                    <a href="#736-%ec%8b%9d%eb%b3%84-%eb%b9%84%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84%ec%9d%98-%ec%9e%a5%eb%8b%a8%ec%a0%90" aria-label="7.3.6 식별, 비식별 관계의 장단점">7.3.6 식별, 비식별 관계의 장단점</a><ul>
                        
                <li>
                    <a href="#%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%b2%a0%ec%9d%b4%ec%8a%a4-%ec%84%a4%ea%b3%84-%ea%b4%80%ec%a0%90---%eb%b9%84%ec%8b%9d%eb%b3%84-%ec%84%a0%ed%98%b8" aria-label="데이터베이스 설계 관점 - 비식별 선호">데이터베이스 설계 관점 - 비식별 선호</a></li>
                <li>
                    <a href="#%ea%b0%9d%ec%b2%b4-%ea%b4%80%ea%b3%84-%eb%a7%a4%ed%95%91-%ea%b4%80%ec%a0%90---%eb%b9%84%ec%8b%9d%eb%b3%84-%ec%84%a0%ed%98%b8" aria-label="객체 관계 매핑 관점 - 비식별 선호">객체 관계 매핑 관점 - 비식별 선호</a></li>
                <li>
                    <a href="#%ec%8b%9d%eb%b3%84-%ea%b4%80%ea%b3%84%ea%b0%80-%ea%b0%80%ec%a7%80%eb%8a%94-%eb%af%b8%ec%84%b8%ed%95%9c-%ec%9e%a5%ec%a0%90" aria-label="식별 관계가 가지는 미세한(?) 장점">식별 관계가 가지는 미세한(?) 장점</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="73-복합-키와-식별-관계-매핑">7.3 복합 키와 식별 관계 매핑<a hidden class="anchor" aria-hidden="true" href="#73-복합-키와-식별-관계-매핑">#</a></h1>
<h1 id="731-식별-관계-vs-비식별-관계">7.3.1 식별 관계 vs 비식별 관계<a hidden class="anchor" aria-hidden="true" href="#731-식별-관계-vs-비식별-관계">#</a></h1>
<h2 id="식별관계">식별관계<a hidden class="anchor" aria-hidden="true" href="#식별관계">#</a></h2>
<ul>
<li>부모 테이블의 기본 키를 내려받아서 자식 테이블의 기본 키 + 외래 키로 사용한다.</li>
</ul>
<h2 id="비식별-관계">비식별 관계<a hidden class="anchor" aria-hidden="true" href="#비식별-관계">#</a></h2>
<ul>
<li>부모 테이블의 기본 키를 받아서 자식 테이블의 외래 키로만 사용하는 관계다.</li>
<li>필수적 비식별 관계(Mandatory)
<ul>
<li><strong>외래 키에 NULL을 허용하지 않는다.</strong></li>
<li>반드시 연관관계를 맺어야 한다.</li>
</ul>
</li>
<li>선택적 비식별 관계(Optional)
<ul>
<li><strong>외래 키에 NULL을 허용한다.</strong></li>
<li>연관관계를 맺을지 말지 선택할 수 있다.</li>
</ul>
</li>
<li>최근 트렌드는 비식별 관계를 주로 사용하고 꼭 필요한 곳에만 식별 관계를 사용하는 추세다.</li>
</ul>
<h1 id="732-복합-키-비식별-관계-매핑">7.3.2 복합 키: 비식별 관계 매핑<a hidden class="anchor" aria-hidden="true" href="#732-복합-키-비식별-관계-매핑">#</a></h1>
<ul>
<li>둘 이상의 컬럼으로 구성된 복합 키는 별도의 식별 클래스를 정의해야한다.</li>
<li>식별자를 구분하기 위해서 <code>equals</code> 와 <code>hashcode</code> 메소드를 통해서 동등성을 비교한다.</li>
<li>식별자 필드가 1개일때는 자바에서 제공하는 타입을 사용하기 때문에 직접 <code>equals</code> 와 <code>hashcode</code> 를 사용할 필요가 없으나, 직접 식별 클래스를 정의할때는 <code>equals</code> 와 <code>hashcode</code> 를 직접 작성 해줘야한다.</li>
<li>JPA는 복합키를 위해 <code>@EmbeddedId</code> 와 <code>@IdClass</code> 를 제공한다.</li>
<li><code>@IdClass</code> 는 데이터베이스에 맞춘 방법이고, <code>@EmbeddedId</code> 는 좀 더 객체지향적인 방법이다.</li>
</ul>
<h2 id="idclass">@IdClass<a hidden class="anchor" aria-hidden="true" href="#idclass">#</a></h2>
<ul>
<li>아래와 같이 복합키 클래스를 작성한다.</li>
<li><code>Serializable</code> 인터페이스를 구현해야한다.</li>
<li><code>equals</code> 와 <code>hashCode</code> 를 작성해야한다.</li>
<li>기본 생성자가 있어야한다.</li>
<li>식별자 클래스는 public이어야 한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled.png" alt="Untitled"  />
</p>
<ul>
<li>아래와 같이 <code>ParentId</code> 클래스를 이용하는 Entity를 생성한다.</li>
<li>주의할 점은 <code>Parent</code> 클래스의 식별자 필드명이 <code>ParentId</code> 의 필드명과 같아야 한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%201.png" alt="Untitled"  />
</p>
<ul>
<li>간단한 예제를 살펴보자.</li>
<li>Parent 엔티티를 저장할때 ParentId를 전혀 사용하지 않는 모습을 확인할 수 있다.</li>
<li>Parent 엔티티를 <code>persist</code> 하게되면 내부적으로 ParentId를 만들어서 영속성 컨텍스트의 엔티티 키로 사용한다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>Parent parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Parent<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">setId1</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId1&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">setId2</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;soojong&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>em<span style="color:#f92672">.</span><span style="color:#a6e22e">persist</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>ParentId parentId <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ParentId<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId1&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;myId2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Parent findParent <span style="color:#f92672">=</span> em<span style="color:#f92672">.</span><span style="color:#a6e22e">find</span><span style="color:#f92672">(</span>Parent<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">,</span> parentId<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;findParent.getId1() = &#34;</span> <span style="color:#f92672">+</span> findParent<span style="color:#f92672">.</span><span style="color:#a6e22e">getId1</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;findParent.getId2() = &#34;</span> <span style="color:#f92672">+</span> findParent<span style="color:#f92672">.</span><span style="color:#a6e22e">getId2</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;findParent.getName() = &#34;</span> <span style="color:#f92672">+</span> findParent<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">());</span>
</span></span></code></pre></div><p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%202.png" alt="Untitled"  />
</p>
<ul>
<li>Child Entity를 정의해보자.</li>
<li>Parent와 연관관계를 맺으려고 하는데 Parent 클래스의 PK가 2개인 경우 아래와 같이 <code>@JoinColumns</code> 어노테이션을 사용하면 된다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%203.png" alt="Untitled"  />
</p>
<h2 id="embeddedid">@EmbeddedId<a hidden class="anchor" aria-hidden="true" href="#embeddedid">#</a></h2>
<ul>
<li><code>ParentId</code> 클래스를 아래와 같이 작성한다.</li>
<li><code>@IdClass</code> 방식과 달리 ParentId에 직접 기본키 컬럼명을 작성한다.</li>
<li>마찬가지로 몇가지 지켜야할 사항이 있는데 아래와 같다.</li>
<li>Serializable 인터페이스를 구현해야한다.</li>
<li><code>equals</code> 와 <code>hashCode</code> 를 구현해야한다.</li>
<li>기본 생성자가 있어야한다.</li>
<li>식별자 클래스는 public 이어야한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%204.png" alt="Untitled"  />
</p>
<ul>
<li><code>Parent</code> 엔티티가 덕분에 심플해진다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%205.png" alt="Untitled"  />
</p>
<ul>
<li>사용 예제를 살펴보자.</li>
<li>이전과 달리 직접 <code>ParentId</code>를 정의하고 세팅해줘야한다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>Parent parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Parent<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>ParentId parentId <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ParentId<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId1&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;myId2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">setId</span><span style="color:#f92672">(</span>parentId<span style="color:#f92672">);</span> <span style="color:#75715e">// 직접 세팅
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#75715e"></span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;parentName&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>em<span style="color:#f92672">.</span><span style="color:#a6e22e">persist</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>ParentId findParentId <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ParentId<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId1&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;myId2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Parent findParent <span style="color:#f92672">=</span> em<span style="color:#f92672">.</span><span style="color:#a6e22e">find</span><span style="color:#f92672">(</span>Parent<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">,</span> findParentId<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;findParent.getName() = &#34;</span> <span style="color:#f92672">+</span> findParent<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">());</span>
</span></span></code></pre></div><p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%206.png" alt="Untitled"  />
</p>
<h2 id="복합-키와-equals-hashcode">복합 키와 equals(), hashCode()<a hidden class="anchor" aria-hidden="true" href="#복합-키와-equals-hashcode">#</a></h2>
<ul>
<li>복합키를 사용하는 경우 직접 <code>equals</code> 와 <code>hashCode</code> 메소드를 구현해야한다.</li>
<li>Object가 제공하는 <code>equals</code> 의 내부 동작 방식은 참조값 비교인  <code>==</code> (동일성) 비교 이다.</li>
<li>영속성 컨텍스트에 있는 엔티티의 키를 찾을때는 <code>equals</code>를 수행하는데 복합키 클래스를 참조 비교하지 않도록 재작성 해야한다. (동등성 비교를 수행하도록 수정 필요)</li>
<li>따라서 복합키 클래스는 <code>equals</code> 메소드를 적절히 오버라이딩해서 작성해야한다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>ParentId id1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ParentId<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId1&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;myId2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>ParentId id2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ParentId<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;myId1&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;myId2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id1.equals(id2) = &#34;</span> <span style="color:#f92672">+</span> id1<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>id2<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id1.hashCode() = &#34;</span> <span style="color:#f92672">+</span> id1<span style="color:#f92672">.</span><span style="color:#a6e22e">hashCode</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id2.hashCode() = &#34;</span> <span style="color:#f92672">+</span> id2<span style="color:#f92672">.</span><span style="color:#a6e22e">hashCode</span><span style="color:#f92672">());</span>
</span></span></code></pre></div><p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%207.png" alt="Untitled"  />
</p>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%208.png" alt="Untitled"  />
</p>
<h2 id="idclass-vs-embeddedid">@IdClass vs @EmbeddedId<a hidden class="anchor" aria-hidden="true" href="#idclass-vs-embeddedid">#</a></h2>
<ul>
<li>두개의 방식이 각각 장단점이 있기때문에 본인의 취향에 맞는 것을 일관성 있게 사용하면된다.</li>
</ul>
<h1 id="733-복합-키-식별-관계-매핑">7.3.3 복합 키: 식별 관계 매핑<a hidden class="anchor" aria-hidden="true" href="#733-복합-키-식별-관계-매핑">#</a></h1>
<h2 id="idclass-방식">@IdClass 방식<a hidden class="anchor" aria-hidden="true" href="#idclass-방식">#</a></h2>
<ul>
<li>아래 그림은 부모에서부터 자식,손자까지 기본 키를 전달하는 식별관계를 나타낸다.</li>
<li>아래 관계를 <code>@IdClass</code> 와 <code>@EmbeddedId</code> 를 사용해서 작성해본다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%209.png" alt="Untitled"  />
</p>
<ul>
<li>먼저 PARENT 테이블에 대응되는 Parent Entity를 정의한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2010.png" alt="Untitled"  />
</p>
<ul>
<li>다음 CHLID 테이블에 대응되는 Child Entity를 정의한다.</li>
<li>CHILD 테이블은 복합키를 가지며, 그중 PARENT_ID는 PARENT 테이블에서 가져온다.</li>
<li>JPA에선 아래와 같이 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2011.png" alt="Untitled"  />
</p>
<ul>
<li>Child Entity가 복합키를 갖도록 ChildId 클래스를 정의한다.</li>
<li>필드명은 Child Entity의 필드명을 그대로 작성해준다.</li>
<li>데이터 타입은 실제 Id의 타입을 따르도록 작성한다. ( Parent Entity의 키 타입을 따르도록한다.)</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2012.png" alt="Untitled"  />
</p>
<ul>
<li>GRANDCHILD 테이블에 대응되는 GrandChild Entity를 작성한다.</li>
<li>물리적으로 총 3개의 키를 가지는 복합키이다.</li>
<li>복합키와 연관관계를 맺을 수 있도록 아래와 같이 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2013.png" alt="Untitled"  />
</p>
<ul>
<li>복합키를 사용할 수 있도록 GrandChildId 클래스를 정의한다.</li>
<li>마찬가지로 데이터 타입은 Child Entity의 데이터 타입을 따르도록 작성한다.</li>
<li>필드명은 GrandChild Entity에 정의되어 있는 키 필드와 동일하게 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2014.png" alt="Untitled"  />
</p>
<h2 id="embeddedid-방식">@EmbeddedId 방식<a hidden class="anchor" aria-hidden="true" href="#embeddedid-방식">#</a></h2>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%209.png" alt="Untitled"  />
</p>
<ul>
<li><code>@EmbeddedId</code> 방식을 사용해서 식별 관계 매핑을 구성할때는 <code>@MapsId</code> 를 사용해야 한다.</li>
<li>Parent Entity를 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2015.png" alt="Untitled"  />
</p>
<ul>
<li>Chlid Entity를 작성한다.</li>
<li><code>@MapsId</code> 어노테이션을 통해 ChildId 클래스에 존재하는 parentId와 매핑을 수행한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2016.png" alt="Untitled"  />
</p>
<ul>
<li>ChildId 클래스를 작성한다.</li>
<li><code>@MapsId(&quot;parentId&quot;)</code> 어노테이션과 매핑 될수 있도록 필드명을 parentId로 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2017.png" alt="Untitled"  />
</p>
<ul>
<li>GrandChild Entity를 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2018.png" alt="Untitled"  />
</p>
<ul>
<li>GrandChildId 클래스를 작성한다.</li>
<li><code>@MapsId(&quot;childId&quot;)</code> 와 매핑하기 위해 필드명을 childId로 해야한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2019.png" alt="Untitled"  />
</p>
<h1 id="734-비식별-관계로-구현">7.3.4 비식별 관계로 구현<a hidden class="anchor" aria-hidden="true" href="#734-비식별-관계로-구현">#</a></h1>
<ul>
<li>7.3.3에서 사용한 식별 관계를 비식별 관계로 변형해서 구현해본다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2020.png" alt="Untitled"  />
</p>
<ul>
<li>Parent Entity를 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2021.png" alt="Untitled"  />
</p>
<ul>
<li>Child Entity를 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2022.png" alt="Untitled"  />
</p>
<ul>
<li>GrandChild Entity를 작성한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2023.png" alt="Untitled"  />
</p>
<ul>
<li>식별 관계의 복합키를 가지는 경우에 비해 코드가 단순해졌다.</li>
</ul>
<h1 id="735-일대일-식별-관계">7.3.5 일대일 식별 관계<a hidden class="anchor" aria-hidden="true" href="#735-일대일-식별-관계">#</a></h1>
<ul>
<li>일대일 식별 관계를 가지는 케이스를 살펴보자.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2024.png" alt="Untitled"  />
</p>
<ul>
<li>먼저 Board 테이블에 대응되는 Board Entity를 만든다.</li>
<li>BoardDetail Entity를 가져올 수 있도록 연관관계를 매핑한다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2025.png" alt="Untitled"  />
</p>
<ul>
<li>BoardDetail 테이블에 대응되는 BoardDetail Entity를 만든다.</li>
<li>특이한 점이 있는데 Board Entity의 Key를 그대로 사용하는것이기 때문에 boardId 필드에 <code>@GeneratedValue</code> 어노테이션이 없다.</li>
<li>BoardDetail에는 식별자가 단 1개만 존재하기 때문에 <code>@MapsId</code> 에 별도의 파라미터를 쓰지 않아도 된다.</li>
<li>이렇게 작성하면 유일한 key 필드인 boardId에 자동으로 매핑되어 정보를 가져올 수 있게된다.</li>
</ul>
<p><img loading="lazy" src="/images/jpa/book-1/7-3/Untitled%2026.png" alt="Untitled"  />
</p>
<h1 id="736-식별-비식별-관계의-장단점">7.3.6 식별, 비식별 관계의 장단점<a hidden class="anchor" aria-hidden="true" href="#736-식별-비식별-관계의-장단점">#</a></h1>
<ul>
<li>식별 관계보다는 비식별 관계를 선호한다.</li>
<li>아주 특별한 경우가 아니라면 비식별 관계를 사용하고, 기본 키는 Long 타입의 대리 키를 사용하는 것이 좋다.</li>
<li>Long 타입을 추천하는 이유는 자바에서 Integer는 20억 정도면 끝나버리지만, Long 타입은 290경까지 표기가 가능하다.</li>
<li>선택적 비식별 관계보단 필수적 비식별 관계를 사용하는 것이 좋다.</li>
<li>선택적인 비식별 관계는 NULL을 허용하기 때문에 Join시에 외부(Outter) Join을 사용해야한다.</li>
<li>반면에 필수적 비식별 관계는 NOT NULL이기 때문에 항상 관계가 있다는 것을 보장하므로 내부(Inner) Join만 사용해도 된다.</li>
</ul>
<h2 id="데이터베이스-설계-관점---비식별-선호">데이터베이스 설계 관점 - 비식별 선호<a hidden class="anchor" aria-hidden="true" href="#데이터베이스-설계-관점---비식별-선호">#</a></h2>
<ul>
<li>부모 테이블의 키를 자식 테이블로 전파하면서 자식 테이블의 키가 늘어나는 현상이 있다.</li>
<li>예시) 부모는 키 1개, 자식은 키 2개, 손자는 키 3개</li>
<li>이렇게 되면 Join시에 SQL이 복잡해지고, 인덱스의 사이즈가 커진다.</li>
<li>복합키를 구성할때 주로 비즈니스와 관련된 컬럼을 사용하는데 비즈니스 변경시에 테이블 작업량이 커진다.</li>
<li>키를 다른 테이블에서 참조하고 있기때문에 테이블 구조가 유연하지 못하게된다.</li>
</ul>
<h2 id="객체-관계-매핑-관점---비식별-선호">객체 관계 매핑 관점 - 비식별 선호<a hidden class="anchor" aria-hidden="true" href="#객체-관계-매핑-관점---비식별-선호">#</a></h2>
<ul>
<li>복합키를 사용하면 별도의 복합키 클래스를 만들어야 하기 때문에 작업량이 늘어난다.</li>
<li>비식별 관계의 기본 키는 주로 대리키를 사용하며 이와 관련된 <code>@GeneratedValue</code> 를 JPA에서 기본적으로 제공한다. (편리성 증가)</li>
</ul>
<h2 id="식별-관계가-가지는-미세한-장점">식별 관계가 가지는 미세한(?) 장점<a hidden class="anchor" aria-hidden="true" href="#식별-관계가-가지는-미세한-장점">#</a></h2>
<ul>
<li>식별 관계를 사용하면 키본 키 인덱스를 활용하기 좋다.</li>
<li>상우 테이블의 키를 자식이 가지고 있으므로, 특정 상황에서 Join을 사용하지 않고 하위테이블 만으로 검색이 가능하다.</li>
<li>예시) 부모의 ID가 A인 자식을 모두 조회하는 경우 자식 테이블 만으로 검색이 가능하다.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://92SooJong.github.io/posts/java/localdatetime/">
    <span class="title">« Prev</span>
    <br>
    <span>LocalDateTime</span>
  </a>
  <a class="next" href="https://92SooJong.github.io/posts/jpa/book-1/7-2-mappedsuperclass/">
    <span class="title">Next »</span>
    <br>
    <span>7.2 @MappedSuperClass</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 7.3 복합 키와 식별 관계 매핑 on twitter"
        href="https://twitter.com/intent/tweet/?text=7.3%20%eb%b3%b5%ed%95%a9%20%ed%82%a4%ec%99%80%20%ec%8b%9d%eb%b3%84%20%ea%b4%80%ea%b3%84%20%eb%a7%a4%ed%95%91&amp;url=https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f&amp;hashtags=JPA%2cBook%2cKorean">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 7.3 복합 키와 식별 관계 매핑 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f&amp;title=7.3%20%eb%b3%b5%ed%95%a9%20%ed%82%a4%ec%99%80%20%ec%8b%9d%eb%b3%84%20%ea%b4%80%ea%b3%84%20%eb%a7%a4%ed%95%91&amp;summary=7.3%20%eb%b3%b5%ed%95%a9%20%ed%82%a4%ec%99%80%20%ec%8b%9d%eb%b3%84%20%ea%b4%80%ea%b3%84%20%eb%a7%a4%ed%95%91&amp;source=https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 7.3 복합 키와 식별 관계 매핑 on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f&title=7.3%20%eb%b3%b5%ed%95%a9%20%ed%82%a4%ec%99%80%20%ec%8b%9d%eb%b3%84%20%ea%b4%80%ea%b3%84%20%eb%a7%a4%ed%95%91">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 7.3 복합 키와 식별 관계 매핑 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 7.3 복합 키와 식별 관계 매핑 on whatsapp"
        href="https://api.whatsapp.com/send?text=7.3%20%eb%b3%b5%ed%95%a9%20%ed%82%a4%ec%99%80%20%ec%8b%9d%eb%b3%84%20%ea%b4%80%ea%b3%84%20%eb%a7%a4%ed%95%91%20-%20https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 7.3 복합 키와 식별 관계 매핑 on telegram"
        href="https://telegram.me/share/url?text=7.3%20%eb%b3%b5%ed%95%a9%20%ed%82%a4%ec%99%80%20%ec%8b%9d%eb%b3%84%20%ea%b4%80%ea%b3%84%20%eb%a7%a4%ed%95%91&amp;url=https%3a%2f%2f92SooJong.github.io%2fposts%2fjpa%2fbook-1%2f7-3-%25EB%25B3%25B5%25ED%2595%25A9-%25ED%2582%25A4%25EC%2599%2580-%25EC%258B%259D%25EB%25B3%2584-%25EA%25B4%2580%25EA%25B3%2584-%25EB%25A7%25A4%25ED%2595%2591%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://92SooJong.github.io/">Today I Learn</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
